"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getAbsoluteOffsetTop(e){var t=e.offsetTop,r=e.offsetParent;return t+(r&&getAbsoluteOffsetTop(r))}Object.defineProperty(exports,"__esModule",{value:!0});var _extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_objectWithoutProperties2=require("babel-runtime/helpers/objectWithoutProperties"),_objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),propTypes={effect:_propTypes2.default.string.isRequired,className:_propTypes2.default.string,style:_propTypes2.default.object,ssr:_propTypes2.default.bool,onReveal:_propTypes2.default.func,children:_propTypes2.default.node.isRequired},defaultProps={className:"",style:{},ssr:!1},Reveal=function(e){function t(){var e,r,s,o;(0,_classCallCheck3.default)(this,t);for(var i=arguments.length,l=Array(i),n=0;n<i;n++)l[n]=arguments[n];return r=s=(0,_possibleConstructorReturn3.default)(this,(e=t.__proto__||(0,_getPrototypeOf2.default)(t)).call.apply(e,[this].concat(l))),s.state={isHidden:!1,isMounted:!1},s.handleScroll=function(){window.pageYOffset+.85*window.innerHeight>getAbsoluteOffsetTop(s.refs.el)&&(s.setState({isHidden:!1}),s.componentWillUnmount(),"function"==typeof s.props.onReveal&&s.props.onReveal())},o=r,(0,_possibleConstructorReturn3.default)(s,o)}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"componentDidMount",value:function(){if(this.props.effect){if(window.pageYOffset+window.innerHeight>getAbsoluteOffsetTop(this.refs.el))return void(this.props.ssr||this.setState({isHidden:!1,isMounted:!0}));this.setState({isHidden:!0,isMounted:!0}),window.setTimeout(this.handleScroll,100),window.addEventListener("scroll",this.handleScroll)}}},{key:"render",value:function(){var e=this.props,t=(e.effect,e.style),r=e.className,s=(e.ssr,e.onReveal,(0,_objectWithoutProperties3.default)(e,["effect","style","className","ssr","onReveal"])),o="",i={};return this.props.effect&&(this.state.isHidden?i.visibility="hidden":this.state.isMounted&&(o=(r?" ":"")+this.props.effect)),_react2.default.createElement("div",(0,_extends3.default)({},s,{style:(0,_extends3.default)({},t,i),className:r+o,ref:"el"}))}}]),t}(_react2.default.Component);Reveal.propTypes=propTypes,Reveal.defaultProps=defaultProps,exports.default=Reveal,module.exports=exports.default;